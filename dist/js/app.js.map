{"version":3,"sources":["app.js"],"names":["gallery","document","querySelector","footer","searchButton","emptyGallery","firstChild","removeChild","createGallery","readyState","DONE","status","response","Error","swal","title","text","type","confirmButtonColor","json","Search","i","length","searchResult","Title","poster","Poster","imdbID","posterImage","galleryHTML","insertAdjacentHTML","url","ajaxCall","createModals","genre","Genre","plot","Plot","year","Released","rating","Ratings","Value","stars","Actors","modalHTML","callGallery","searchText","value","search","split","join","name","oReq","XMLHttpRequest","responseType","addEventListener","open","send","createFavoritesGallery","sofianFavorites","myMovies","movie","previousElementSibling","e","preventDefault","target","id","modal","Custombox","content","fullscreen","effect","loader","active","color","speed"],"mappings":"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","file":"app.js","sourcesContent":["\"use strict\";\n\nlet gallery = document.querySelector('#js__list');\nlet footer = document.querySelector('#js__footer');\nlet searchButton = document.querySelector('#js__button');\n\n//\n// Ajax call to get Movies from omdb api\n//\n\nfunction emptyGallery(gallery){\n  while (gallery.firstChild) {\n    gallery.removeChild(gallery.firstChild);\n  }\n}\n\nfunction createGallery () {\n  if (this.readyState === this.DONE) {\n    if (this.status === 200) {\n      if(this.response.Error === \"Movie not found!\"){\n        swal({\n          title: \"Movie not found\",\n          text: \"Please check for typo's and try again\",\n          type: \"error\",\n          confirmButtonColor: \"#2a3d45\",\n        });\n      }else{\n        let json = this.response.Search;\n        for(let i = 0; i < json.length; i++) {\n          let searchResult = json[i];\n          let title = searchResult.Title;\n          let poster = searchResult.Poster;\n          let imdbID = searchResult.imdbID;\n          let posterImage ='';\n          if(poster === 'N/A'){\n            posterImage =`<svg  class=\"icons\">\n            <use id=\"${imdbID}\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"./img/sprite/sprite.svg#icons--popcorn\"></use>\n          </svg>\n          <h5>${title}</h5>`\n          }else {\n            posterImage =`<img id=\"${imdbID}\" src=\"${poster}\" alt=\"${title}\"/>`\n          }\n          let galleryHTML = `\n          <li class=\"list__item\">\n            <a class=\"list__content\" href=\"${imdbID}\" title=\"${title}\">\n              ${posterImage}\n            </a>\n          </li>\n          `;\n          gallery.insertAdjacentHTML('afterbegin',galleryHTML);\n\n          // Call to create modals\n          const url = `https://www.omdbapi.com/?i=${imdbID}`;\n          ajaxCall(url,createModals);\n        }\n      }\n    }\n  }\n};\n\nfunction createModals () {\n  if (this.readyState === this.DONE) {\n    if (this.status === 200) {\n      let searchResult = this.response;\n      let imdbID = searchResult.imdbID;\n      let genre = searchResult.Genre;\n      let plot = searchResult.Plot;\n      let title = searchResult.Title;\n      let year = searchResult.Released;\n      let poster = searchResult.Poster;\n      let rating = searchResult.Ratings[0].Value;\n      let stars = searchResult.Actors;\n      let posterImage ='';\n      if(poster === 'N/A'){\n        posterImage =\n        `<svg class=\"icons\">\n        <use id=\"${imdbID}\"  xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"./img/sprite/sprite.svg#icons--popcorn\"></use>\n      </svg>`\n    }else {\n      posterImage =`<img class=\"modal__image\" id=\"${imdbID}\" src=\"${poster}\" alt=\"${title}\"/>`\n    }\n    let modalHTML = `\n    <div id=\"modal__${imdbID}\" class=\"modal\">\n      <div class=\"modal__layout\">\n        <button type=\"button\" class=\"button__modal\" onclick=\"Custombox.modal.closeAll();\">Back</button>\n        ${posterImage}\n        <div class=\"modal__content\">\n          <h1>${title}</h1>\n          <p>${plot}</p>\n          <div class=\"modal__facts\">\n            <span class=\"modal__fact\">Release Date: </span><span class=\"modal__fact\">${year}</span>\n            <span class=\"modal__fact\">Genre: </span><span class=\"modal__fact\">${genre}</span>\n            <span class=\"modal__fact\">Rating: </span><span class=\"modal__fact\">${rating}</span>\n            <span class=\"modal__fact\">Stars: </span><span class=\"modal__fact\">${stars}</span>\n          </div>\n        </div>\n      </div>\n    </div>\n    `;\n    footer.insertAdjacentHTML('afterend',modalHTML);\n  }\n}\n};\n\nfunction callGallery(){\n  let searchText = document.querySelector('.search__input');\n  if(searchText.value){\n    emptyGallery(gallery);\n    let search = searchText.value.split(' ').join('+');\n    const url = `https://www.omdbapi.com/?s=${search}&type=movie`;\n\n    ajaxCall(url,createGallery);\n    searchText.value ='';\n  }\n}\n\nfunction ajaxCall(url,name){\n  let oReq = new XMLHttpRequest();\n  oReq.responseType = 'json';\n  oReq.addEventListener('load', name);\n  oReq.open(\"get\", url, true);\n  oReq.send();\n}\n\nfunction createFavoritesGallery () {\n  if (this.readyState === this.DONE) {\n    if (this.status === 200) {\n      let searchResult = this.response;\n      let title = searchResult.Title;\n      let poster = searchResult.Poster;\n      let imdbID = searchResult.imdbID;\n      let galleryHTML = `\n      <li class=\"list__item\">\n        <a class=\"list__content\" href=\"${imdbID}\" title=\"${title}\">\n          <img id=\"${imdbID}\" src=\"${poster}\" alt=\"${title}\"/>\n        </a>\n      </li>\n      `;\n      gallery.insertAdjacentHTML('beforeend',galleryHTML);\n    }\n  }\n};\nfunction sofianFavorites(){\n  let myMovies = ['tt0119116','tt0414993','tt2015381','tt0468569','tt0119174','tt1568346','tt0347149','tt2488496'];\n  for (let i=0; i < myMovies.length; i++){\n    const movie = myMovies[i];\n    const url = `https://www.omdbapi.com/?i=${movie}`;\n    ajaxCall(url, createFavoritesGallery);\n    ajaxCall(url, createModals);\n  }\n}\nsofianFavorites();\n//\n// Add event listener to search input and button\n//\n\nsearchButton.addEventListener('click', callGallery);\nsearchButton.previousElementSibling.addEventListener('change', callGallery);\n\n//\n// Open modal on click\n//\n\ngallery.addEventListener('click', (e)=>{\n  e.preventDefault();\n  let imdbID = e.target.id;\n  let modal = new Custombox.modal({\n    content: {\n      fullscreen: true,\n      effect: 'fadein',\n      target: '#modal__'+imdbID\n    },\n    loader: {\n      active: true,\n      color: '#000',\n      speed: 1500,\n    }\n  });\n  modal.open();\n});\n"]}