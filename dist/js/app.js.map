{"version":3,"sources":["app.js"],"names":["gallery","document","querySelector","footer","searchButton","emptyGallery","firstChild","removeChild","createGallery","readyState","DONE","status","response","Error","swal","title","text","type","confirmButtonColor","json","Search","i","length","searchResult","Title","poster","Poster","imdbID","posterImage","galleryHTML","insertAdjacentHTML","url","oReq","XMLHttpRequest","responseType","addEventListener","createModals","open","send","genre","Genre","plot","Plot","year","Year","modalHTML","ajaxCall","console","log","searchText","value","search","split","join","previousElementSibling","e","preventDefault","target","id","modal","Custombox","content","fullscreen","effect","loader","active","color","speed"],"mappings":"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","file":"app.js","sourcesContent":["\"use strict\";\n\nlet gallery = document.querySelector('#js__list');\nlet footer = document.querySelector('#js__footer');\nlet searchButton = document.querySelector('#js__button');\n\n//\n// Ajax call to get Movies from omdb api\n//\n\nfunction emptyGallery(gallery){\n  while (gallery.firstChild) {\n    gallery.removeChild(gallery.firstChild);\n  }\n}\nfunction createGallery () {\n  if (this.readyState === this.DONE) {\n    if (this.status === 200) {\n      if(this.response.Error === \"Movie not found!\"){\n        swal({\n          title: \"Movie not found\",\n          text: \"Please check for typo's and try again\",\n          type: \"error\",\n          confirmButtonColor: \"#2a3d45\",\n        });\n      }else{\n        let json = this.response.Search;\n        for(let i = 0; i < json.length; i++) {\n          let searchResult = json[i];\n          let title = searchResult.Title;\n          let poster = searchResult.Poster;\n          let imdbID = searchResult.imdbID;\n          let posterImage ='';\n          if(poster === 'N/A'){\n            posterImage =`<svg  class=\"icons\">\n            <use id=\"${imdbID}\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"./img/sprite/sprite.svg#icons--popcorn\"></use>\n          </svg>\n          <h5>${title}</h5>`\n          }else {\n            posterImage =`<img id=\"${imdbID}\" src=\"${poster}\" alt=\"${title}\"/>`\n          }\n          let galleryHTML = `\n          <li class=\"list__item\">\n            <a class=\"list__content\" href=\"${imdbID}\" title=\"${title}\">\n              ${posterImage}\n            </a>\n          </li>\n          `;\n          gallery.insertAdjacentHTML('afterbegin',galleryHTML);\n\n          // Call to create modals\n          const url = `https://www.omdbapi.com/?i=${imdbID}`;\n          let oReq = new XMLHttpRequest();\n          oReq.responseType = 'json';\n          oReq.addEventListener('load', createModals);\n          oReq.open(\"get\", url, true);\n          oReq.send();\n        }\n      }\n    }\n  }\n};\n\nfunction createModals () {\n  if (this.readyState === this.DONE) {\n    if (this.status === 200) {\n      let searchResult = this.response;\n      let imdbID = searchResult.imdbID;\n      let genre = searchResult.Genre;\n      let plot = searchResult.Plot;\n      let title = searchResult.Title;\n      let year = searchResult.Year;\n      let poster = searchResult.Poster;\n      let posterImage ='';\n      if(poster === 'N/A'){\n        posterImage =\n        `<svg class=\"icons\">\n        <use id=\"${imdbID}\"  xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"./img/sprite/sprite.svg#icons--popcorn\"></use>\n      </svg>`\n    }else {\n      posterImage =`<img class=\"modal__image\" id=\"${imdbID}\" src=\"${poster}\" alt=\"${title}\"/>`\n    }\n    let modalHTML = `\n    <div id=\"modal__${imdbID}\" class=\"modal\">\n      <div class=\"modal__layout\">\n        <button type=\"button\" class=\"button__modal\" onclick=\"Custombox.modal.closeAll();\">Back</button>\n        ${posterImage}\n        <div class=\"modal__content\">\n          <h1>${title}</h1>\n          <p>${plot}</p>\n          <span>Year: </span><span>${year}</span><br>\n            <span>Genre: </span><span>${genre}</span>\n          </div>\n        </div>\n      </div>\n      `;\n      footer.insertAdjacentHTML('afterend',modalHTML);\n    }\n  }\n};\n\nfunction ajaxCall(){\n  console.log('triggered');\n  let searchText = document.querySelector('.search__input');\n  if(searchText.value){\n    emptyGallery(gallery);\n    let search = searchText.value.split(' ').join('+');\n    const url = `https://www.omdbapi.com/?s=${search}&type=movie`;\n\n    let oReq = new XMLHttpRequest();\n    oReq.responseType = 'json';\n    oReq.addEventListener('load', createGallery);\n    oReq.open(\"get\", url, true);\n    oReq.send();\n    searchText.value ='';\n  }\n}\n\n//\n// Add event listener to search input and button\n//\n\nsearchButton.addEventListener('click', ajaxCall);\nsearchButton.previousElementSibling.addEventListener('change', ajaxCall);\n\n//\n// Open modal on click\n//\n\ngallery.addEventListener('click', (e)=>{\n  e.preventDefault();\n  let imdbID = e.target.id;\n  let modal = new Custombox.modal({\n    content: {\n      fullscreen: true,\n      effect: 'fadein',\n      target: '#modal__'+imdbID\n    },\n    loader: {\n      active: true,\n      color: '#000',\n      speed: 1500,\n    }\n  });\n  modal.open();\n});\n"]}